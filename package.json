{
  "name": "casfa-monorepo",
  "private": true,
  "type": "module",
  "workspaces": [
    "packages/*",
    "apps/*"
  ],
  "scripts": {
    "aws:login": "bun -e \"const content = await Bun.file('.env').text(); const match = content.match(/^AWS_PROFILE=(.+)$/m); if (!match) { console.error('AWS_PROFILE not set in .env'); process.exit(1); } Bun.spawnSync(['aws', 'sso', 'login', '--profile', match[1]], {stdio: ['inherit', 'inherit', 'inherit']})\"",
    "clean": "rimraf packages/*/dist apps/*/dist apps/cli/dist apps/server/backend/dist apps/server/backend/public apps/server/.aws-sam",
    "build": "bun run build:packages",
    "build:packages": "cd packages/port-rpc && bun run build && cd ../encoding && bun run build && cd ../protocol && bun run build && cd ../cas-uri && bun run build && cd ../delegate && bun run build && cd ../proof && bun run build && cd ../storage-core && bun run build && cd ../core && bun run build && cd ../cas && bun run build && cd ../realm && bun run build && cd ../dag-diff && bun run build && cd ../delegate-token && bun run build && cd ../client-auth-crypto && bun run build && cd ../storage-fs && bun run build && cd ../storage-memory && bun run build && cd ../storage-s3 && bun run build && cd ../storage-cached && bun run build && cd ../fs && bun run build && cd ../client && bun run build && cd ../storage-indexeddb && bun run build && cd ../storage-http && bun run build && cd ../explorer && bun run build && cd ../client-bridge && bun run build && cd ../client-sw && bun run build && cd ../oauth-consumer && bun run build && cd ../oauth-provider && bun run build && cd ../../apps/cli && bun run build",
    "typecheck": "cd packages/protocol && bun run typecheck && cd ../storage-core && bun run typecheck && cd ../core && bun run typecheck && cd ../delegate && bun run typecheck && cd ../proof && bun run typecheck && cd ../storage-fs && bun run typecheck && cd ../storage-memory && bun run typecheck && cd ../storage-s3 && bun run typecheck && cd ../client && bun run typecheck && cd ../../apps/server && bun run typecheck && cd ../server-next && bun run typecheck",
    "lint": "biome check .",
    "lint:fix": "biome check --write .",
    "check": "bun run typecheck && bun run lint",
    "test": "bun run test:unit && bun run test:e2e",
    "test:unit": "cd packages/port-rpc && bun run test:unit && cd ../cas-uri && bun run test:unit && cd ../client-auth-crypto && bun run test:unit && cd ../core && bun run test:unit && cd ../cas && bun run test:unit && cd ../realm && bun run test:unit && cd ../delegate && bun run test:unit && cd ../delegate-token && bun run test:unit && cd ../proof && bun run test:unit && cd ../storage-cached && bun run test:unit && cd ../storage-http && bun run test:unit && cd ../client && bun run test:unit && cd ../../apps/server && bun run test:unit && cd ../server-next && bun test",
    "test:e2e": "cd packages/storage-http && bun run test:e2e && cd ../../apps/cli && bun run test:e2e && cd ../server && bun run test:e2e",
    "changeset": "changeset",
    "version": "changeset version",
    "release": "bun run build:packages && changeset publish"
  },
  "devDependencies": {
    "@biomejs/biome": "^2.3.11",
    "@changesets/cli": "^2.29.8",
    "@types/bun": "latest",
    "rimraf": "^6.0.1",
    "typescript": "^5.8.3"
  }
}

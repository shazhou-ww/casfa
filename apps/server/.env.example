# CASFA v2 - Environment Configuration
#
# This file documents all environment variables for casfa-v2.
# Shared configuration (ports, DynamoDB, Cognito) should be set in the
# root .env file. This app-level .env can override for local testing.
#
# Port allocation convention (see root .env.example):
#   87xx - Databases (DynamoDB: 8700)
#   88xx - Backend APIs (casfa-v2: 8801)
#   89xx - Frontend dev servers

# =============================================================================
# Database (Local Development)
# =============================================================================
# Inherit from root .env: DYNAMODB_ENDPOINT=http://localhost:8700
# Override only if needed:
# DYNAMODB_ENDPOINT=http://localhost:8700

# Table names (defaults work with db:create script)
TOKENS_TABLE=cas-tokens
CAS_REALM_TABLE=cas-realm
CAS_REFCOUNT_TABLE=cas-refcount
CAS_USAGE_TABLE=cas-usage

# =============================================================================
# Storage
# =============================================================================
# Storage type: memory | fs | s3
STORAGE_TYPE=memory

# File system storage (when STORAGE_TYPE=fs)
# STORAGE_FS_PATH=./data

# S3 storage (when STORAGE_TYPE=s3)
# CAS_BUCKET=your-bucket-name
# CAS_PREFIX=cas/v1/
# CAS_REGION=us-west-2

# =============================================================================
# Authentication (Cognito - Required for development)
# =============================================================================
# Set these in the monorepo root .env file. The dev script (--preset aws)
# loads them automatically.
COGNITO_USER_POOL_ID=us-east-1_vgPkJO4J1
COGNITO_CLIENT_ID=1k8hj2mvfisimgg8eskrv3hsnk
COGNITO_REGION=us-east-1
COGNITO_HOSTED_UI_URL=https://mitsein-auth.auth.us-east-1.amazoncognito.com

# =============================================================================
# Authentication (Mock JWT - for tests only)
# =============================================================================
# Only used with --preset test or --auth mock. Not for normal development.
# MOCK_JWT_SECRET=dev-secret-change-in-prod

# =============================================================================
# Server
# =============================================================================
# Inherit from root .env: PORT_CASFA_V2_API=8801
# Override only if needed:
# PORT_CASFA_V2_API=8801

# Base URL for API responses
# CAS_BASE_URL=http://localhost:3560

# =============================================================================
# Redis Cache (local development)
# =============================================================================
# Redis is auto-started by docker-compose when using default/local preset.
# Set REDIS_ENABLED=false to disable caching entirely.
REDIS_ENABLED=true
REDIS_URL=redis://localhost:6379
# REDIS_KEY_PREFIX=cas:
# REDIS_CONNECT_TIMEOUT_MS=2000
# REDIS_COMMAND_TIMEOUT_MS=500

# =============================================================================
# Limits
# =============================================================================
# CAS_NODE_LIMIT=4194304
# CAS_MAX_NAME_BYTES=255
# CAS_MAX_COLLECTION_CHILDREN=10000
# CAS_MAX_PAYLOAD_SIZE=10485760
# CAS_MAX_TICKET_TTL=86400
# CAS_MAX_AGENT_TOKEN_TTL=2592000

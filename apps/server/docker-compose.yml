services:
  # Persistent DynamoDB Local - for daily development (data retained across restarts)
  dynamodb:
    image: amazon/dynamodb-local:latest
    container_name: dynamodb
    ports:
      - "8700:8000"
    command: ["-jar", "DynamoDBLocal.jar", "-sharedDb", "-dbPath", "/data"]
    volumes:
      - dynamodb-data:/data
    restart: unless-stopped

  # In-memory DynamoDB Local - for E2E tests (clean each run)
  dynamodb-test:
    image: amazon/dynamodb-local:latest
    container_name: dynamodb-test
    ports:
      - "8701:8000"
    command: ["-jar", "DynamoDBLocal.jar", "-sharedDb", "-inMemory"]
    restart: "no"

volumes:
  dynamodb-data:
